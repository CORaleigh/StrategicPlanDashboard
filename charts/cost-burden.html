<html>
<head>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
  <script type="text/javascript" src="https://vega.github.io/vega/vega.min.js"></script>
  <script type="text/javascript" src="https://npmcdn.com/arcgis-cedar/dist/cedar.js"></script>
</head>
<body>

<div class="row">
<h3 align="center"></h3>
  <div style="width: 450px; height: 400px" id="chart"></div>

</div>

<script>
  var chart = new Cedar({"type": "grouped"});
  var data = Cedar.getJson('https://coraleigh.github.io/StrategicPlanDashboard/charts/cost-burden.json', function(err, data){
    if(!err){
      var dataset = {
        "data": data,
        "mappings":{
          "grouped": {
            "field": "year",
            "label": ""
          },
          "value": {
            "field": "RentBurdened",
            "label": ""
          },
           "value": {
            "field": "PropertyCrimes",
            "label": ""
          },
          "x": {"field":["attributes.RentBurdened","attributes.OwnerBurdened"],"label":"Cost Burdened"},
          //"y": {"field":[""],"label":""},
          "group":{"field":"year","label":"year"}
           //"x": {"field":"percent","label":""},
           //"y": {"field":"metric","label":""}
        }
      };
      //test
      //assign to the chart
      chart.dataset = dataset;
      //show the chart
      chart.show({
        elementId: "#chart"
      });
    }else{
      console.error('Error loading data from file');
    }
  });
   chart.tooltip = {
     "title": "{year}",
     "content": "{RentBurdened} Rent Burdened in {year} | {OwnerBurdened} % Owner Burdened in {year}"
   };
   chart.override = {
    "axes":[
      {
          "type":"x",
          "scale":"x",
          "title":"Year"
      }]
    //"marks": [
        //{"properties": 
        //{
          //"hover": {"fill": {"value": "#17581D"}},
          //"update": {"fill": {"value": "#718A73"}}
        //}
      //}
    //]
  //};
   //assign to the chart
   chart.dataset = dataset;
   //show the chart
   chart.show({
     elementId: "#chart"
   });
</script>
</body>
</html>
