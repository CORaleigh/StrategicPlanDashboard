<html>
<head>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
  <script type="text/javascript" src="https://vega.github.io/vega/vega.min.js"></script>
  <script type="text/javascript" src="https://npmcdn.com/arcgis-cedar/dist/cedar.js"></script>
</head>
<body>


  <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
  <style>
    #resizable { width: 750px; height: 550px; padding: 0.5em; }
  </style>

<script>
  var chart = new Cedar({"type": "grouped"});
  var data = Cedar.getJson('https://coraleigh.github.io/StrategicPlanDashboard/charts/crimes-per.json', function(err, data){
    if(!err){
  var dataset = {
    "data": data,
    "mappings":{
      "x": {"field":["attributes.PersonCrimes","attributes.PropertyCrimes"],"label":"Crimes"},
      //"y": {"field":["connections"],"label":"connections"},
      "group":{"field":"year","label":"year"}
    }
  };
  chart.tooltip = {
    "title": "{year}",
    "content": "{PersonCrimes} Person Crimes in {year} | {PropertyCrimes} PropertyCrimes in {year}"
   };
  chart.override = {
    "axes":[
      {"type":"x","title":"Fiscal Year"},
      {"type":"y","title":"Crimes per 100,000 People"}
    ]
    //"marks": [
      //{"properties": 
        //{
          //"hover": {"fill": {"value": "#17581D"}},
          //"update": {"fill": {"value": "#718A73"}}
        //}
      //}
    //]
  };
  //assign to the chart
  chart.dataset = dataset;
  //show the chart
  chart.show({
      elementId: "#chart"
  });
  $(function() {
    $( "#resizable" ).resizable({
      resize: function() { chart.update(); }
    });
  });
    }else{
      console.error('Error loading data from file');
    }
  });
</script>
</body>
</html>
